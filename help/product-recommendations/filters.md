---
title: 筛选产品
description: 定义包括或排除用作推荐的产品条件。
exl-id: 140bf047-4f6a-48da-b536-d96e78ae3d17
source-git-commit: 1b10163c39d9f309afd24aa2e808a57e069258f8
workflow-type: tm+mt
source-wordcount: '746'
ht-degree: 0%

---

# 筛选产品

Adobe Commerce会自动将不可配置的默认过滤器应用于推荐单元。 如果您将多个推荐单元部署到页面，则Adobe Commerce会过滤掉这些单元中重复的所有产品。 仅使用对重复产品的第一次引用，以便为推荐其他产品腾出空间。 Adobe Commerce还会过滤掉任何之前购买过的产品和购物车中的产品。

当您[创建](create.md)推荐单元时，您可以定义用于控制可在推荐中显示哪些产品的过滤器。 这些过滤器基于您定义的一组包含或排除条件。 只有符合所有包含条件的产品才会出现在推荐中。 不建议使用符合任何排除条件的产品。

您可以通过选择每个过滤器页面上的切换来配置多个过滤器，并仅启用所需的过滤器。 这允许您创建过滤器草稿以供将来使用。 每个选项卡上会显示已启用的过滤器的数量。

## 条件

条件可以是静态或动态。

- 静态条件使用现有的产品属性来确定哪些产品可以显示在设备中。 例如，您可以指定只有价格超过$25的库存产品才会出现在单位中。 静态条件适用于所有页面类型。

- 动态条件可关闭购物者的当前上下文，例如当前查看的类别或产品。 例如，在创建要在产品详细信息页面上部署的产品推荐时，您可以创建一个条件，以仅推荐在当前查看的产品相对价格范围内的产品。 除了主页之外，动态条件适用于每个页面类型，也适用于通过页面生成器放置了推荐的页面。

### 逻辑运算符

逻辑运算符`AND`和`OR`用于连接多个条件。 如果同时使用包含和排除过滤器，则会先评估包含内容，以确定所有可能推荐的产品，然后从列表中删除与任何排除过滤器匹配的产品。

- `AND` — 加入两个包含过滤条件
- `OR` — 加入两个排除筛选条件

>[!NOTE]
>
> 包含和排除过滤器将取代`magento/product-recommendations`模块版本3.2.2及更高版本中的旧版类别排除。 请参阅[发行说明](release-notes.md)，了解有关Adobe Commerce版本的更多信息。

## 筛选器类型 {#filtertypes}

![筛选器](assets/rec-conditions.png)

### 类别

根据产品类别筛选产品。 类别过滤器使用直接类别分配及其子类别。 例如，为类别`Gear`启用排除条件将排除分配给`Gear`的产品及其所有子类别，如`Gear/Bags`或`Gear/Fitness Equipment`。 这同样适用于类别上的包含过滤器。 例如，启用类别`Gear`的包含条件包括分配给`Gear`的产品及其所有子类别，如`Gear/Bags`或`Gear/Fitness Equipment`。

类别字段显示属于当前商店的类别。

>[!NOTE]
>
>对于B2B商家，类别过滤器会遵循您配置的任何[客户特定的产品类别](https://experienceleague.adobe.com/docs/commerce-admin/catalog/categories/category-permissions.html)。

当您将推荐部署到页面类型时，Adobe Commerce建议您使用以下类别过滤器配置：

| 页面 | 过滤方式 |
|---|---|
| 主页 | 不筛选产品。 |
| 类别 | 筛选特定类别中的产品。 |
| 产品详细信息 | 筛选相同类别中的产品。 |
| 购物车 | 过滤购物车中产品的类别。 |
| 订单确认 | 筛选所购买产品的类别。 |

### 产品

产品筛选器指定哪些特定产品符合条件或不符合条件，以便显示在推荐中。 您无法选择已禁用或无法单独显示的产品，因为这些产品永远不会显示在推荐中。

>[!NOTE]
>
>可配置产品的子产品不显示在推荐单元中，因为这些子产品具有&#x200B;_不可见_&#x200B;的可见性。

### 类型

基于产品类型的筛选器包括或排除特定类型的所有产品。 支持的类型包括&#x200B;_简单_、_可配置_、_虚拟_、_可下载_&#x200B;或&#x200B;_礼品卡_。 不支持&#x200B;_捆绑包_、_分组_&#x200B;和自定义产品类型。

### 可见性

根据可见性筛选产品，例如： _目录_、_搜索_&#x200B;或两者。

### 价格

基于产品价格的过滤器使用最终价格来执行比较。 最终价格包括匿名购物者可享受的任何折扣。 对于B2B商家，显示的价格反映了您配置的[客户特定的组价格](https://experienceleague.adobe.com/docs/commerce-admin/catalog/products/pricing/pricing-advanced.html)。

### 库存状态

以下排除过滤器可用于根据库存状态筛选产品：

- 缺货 — （仅排除）不包括缺货产品。
- 库存低 — （仅排除）不包括库存低的产品。 低库存状态基于&#x200B;_库存配置_&#x200B;中的[仅X剩余阈值](https://experienceleague.adobe.com/docs/commerce-admin/config/catalog/inventory.html)值。
